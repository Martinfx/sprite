


SCSI                         Devices                         SCSI



_________________________________________________________________

NNAAMMEE
     scsi - Devices used to send arbitrary SCSI commands to  SCSI
     devices

SSYYNNOOPPSSIISS
     ##iinncclluuddee <<ddeevv//ssccssii..hh>>

_________________________________________________________________


DDEESSCCRRIIPPTTIIOONN
     SCSI devices are used to send  arbitrary  SCSI  commands  to
     SCSI  devices.   The  interface uses IO-Controls to pass the
     SCSI command block and command data to the device and return
     the  command  status  byte,  command data, and any scsi mode
     sense data generated.  The IO-Control IIOOCC__SSCCSSII__CCOOMMMMAANNDD takes
     as  input  a Dev_ScsiCommand and returns in the out buffer a
     Dev_ScsiStatus.

          typedef struct Dev_ScsiCommand {
              int        bufferLen;
              int        dataOffset;
              int        commandLen;
          } Dev_ScsiCommand;
     The field bbuuffffeerrLLeenn specifies the length  of  the  command's
     data  buffer.  The  data  buffer itself is located in the in
     buffer for commands that send data to the device and the out
     buffer  for  commands that return data. ddaattaaOOffffsseett specifies
     the offset into the IO-Control's input buffer of  the  start
     of  the  data buffer.  If bbuuffffeerrLLeenn is greater than zero and
     the ddaattaaOOffffsseett equals the size of the input buffer then  the
     command  is  assumed  to  return data.  The ccoommmmaannddLLeenn field
     specifies the number of bytes following the  Dev_ScsiCommand
     structure that make up the SCSI command block.

          typedef struct Dev_ScsiStatus {
              int        statusByte;
              int        amountTransferred;
              int        senseDataLen;
          } Dev_ScsiStatus;
     The output buffer of the IIOOCC__SSCCSSII__CCOOMMMMAANNDD  command  consists
     of  a  Dev_ScsiStatus  followed  by any data returned by the
     device followed by any sense data generated by the  command.
     The  field  ssttaattuussBByyttee  contains  the  SCSI  status  byte as
     returned by the SCSI device and the field  aammoouunnttTTrraannssffeerrrreedd
     reports the number of data bytes transferred by the command.
     sseennsseeDDaattaaLLeenn reports the  number  of  bytes  of  sense  data
     returned byte the command.  The out buffer looks like:

               Dev_ScsiStatus statusBlock;
               char data[statuBlock.amountTransferred];
               char modeSenseData[statuBlock.senseDataLen];



Sprite v.1.0        Printed:  March 15, 1990                    1






SCSI                         Devices                         SCSI



WWAARRNNIINNGG
     The SCSI command set supported by most devices include  some
     very   destructive   commands   such   as   FORMAT_UNIT  and
     ERASE_TAPE. Extreme care should be  taken  when  using  this
     interface.

KKEEYYWWOORRDDSS
     scsi command, scsi device, HBA















































Sprite v.1.0        Printed:  March 15, 1990                    2



