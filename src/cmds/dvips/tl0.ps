%!PS-Adobe-2.0
%%Creator: dvips by Radical Eye Software
%%Title: tl0.dvi
%%Pages: 7 1
%%BoundingBox: 0 0 612 792
%%EndComments
%%BeginDocument: tex.pro
/TeXDict 200 dict def TeXDict begin /bdf{bind def}def /@rigin{72 Resolution
div dup neg scale translate}bdf /@letter{Resolution dup -10 mul @rigin}bdf
/@landscape{[0 1 -1 0 0 0]concat Resolution dup @rigin}bdf /@a4{Resolution dup
-10.6929133858 mul @rigin}bdf /@legal{Resolution dup -13 mul @rigin}bdf
/@manualfeed{statusdict /manualfeed true put}bdf /@copies{/#copies exch def}
bdf /@FontMatrix[1 0 0 -1 0 0]def /@FontBBox[0 0 0 0]def /dmystr(ZZf@@@)def
/newname{dmystr cvn}bdf /df{/fontname exch def dmystr 2 fontname cvx(@@@@)cvs
putinterval newname 7 dict def newname load begin /FontType 3 def /FontMatrix
@FontMatrix def /FontBBox @FontBBox def /BitMaps 256 array def /BuildChar{
CharBuilder}def /Encoding IdentityEncoding def end fontname{/foo setfont}2
array copy cvx def fontname load 0 dmystr 6 string copy cvn cvx put}bdf /dfe{
newname dup load definefont setfont}bdf /ch-image{ch-data 0 get}bdf /ch-width{
ch-data 1 get}bdf /ch-height{ch-data 2 get}bdf /ch-xoff{ch-data 3 get}bdf
/ch-yoff{ch-data 4 get}bdf /ch-dx{ch-data 5 get}bdf /CharBuilder{save 3 1 roll
exch /BitMaps get exch get /ch-data exch def ch-data null ne{ch-dx 0 ch-xoff
ch-yoff neg ch-xoff ch-width add ch-height ch-yoff sub setcachedevice ch-width
ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-height ch-yoff sub .1 add]{
ch-image}imagemask}if restore}bdf /dc{/ch-code exch def /ch-data exch def
newname load /BitMaps get ch-code ch-data put}bdf /bop{gsave /SaveImage save
def 0 0 moveto}bdf /eop{clear SaveImage restore showpage grestore}bdf /@start{
/Resolution exch def /IdentityEncoding 256 array def 0 1 255{IdentityEncoding
exch 1 string dup 0 3 index put cvn put}for}bdf /p{show}bdf /RuleMatrix[1 0 0
-1 -.1 -.1]def /BlackDots 8 string def /v{gsave currentpoint translate false
RuleMatrix{BlackDots}imagemask grestore}bdf /a{moveto}bdf /delta 0 def /tail{
dup /delta exch def 0 rmoveto}bdf /b{exch show tail}bdf /c{show delta 4 sub
tail}bdf /d{show delta 3 sub tail}bdf /e{show delta 2 sub tail}bdf /f{show
delta 1 sub tail}bdf /g{show delta 0 rmoveto}bdf /h{show delta 1 add tail}bdf
/i{show delta 2 add tail}bdf /j{show delta 3 add tail}bdf /k{show delta 4 add
tail}bdf /l{show -4 0 rmoveto}bdf /m{show -3 0 rmoveto}bdf /n{show -2 0
rmoveto}bdf /o{show -1 0 rmoveto}bdf /q{show 1 0 rmoveto}bdf /r{show 2 0
rmoveto}bdf /s{show 3 0 rmoveto}bdf /t{show 4 0 rmoveto}bdf /w{0 rmoveto}bdf
/x{0 exch rmoveto}bdf /y{3 2 roll show moveto}bdf /bos{/section save def}bdf
/eos{clear section restore}bdf end /Resolution 300 def /Inch{Resolution mul}
def /ln03$defs 10 dict def ln03$defs begin /points 256 array def 0 1 255{
points exch[0 0]put}for /linebuf 100 string def /getvarnum{token not{stop}if
exec /varnum exch def}def /get2varnum{{( )anchorsearch{pop pop}{exit}ifelse}
loop( )search{exch pop}{()exch}ifelse(/)search{Pagenum 1 and 0 eq{pop pop}{
exch pop exch pop}ifelse}if cvi /varnum exch def}def /getdimension{exch dup
length 1 sub 0 1 3 -1 roll{pop dup 0 1 getinterval( )eq{dup length 1 sub 1
exch getinterval}{exit}ifelse}for dup length 0 eq{pop}{exch pop dup dup length
2 sub 2 getinterval 1[[1 Inch 72 div(pt)][1 Inch(in)][1 Inch 6 div(pc)][1 Inch
2.54 div(cm)][1 Inch 25.4 div(mm)]]{aload pop 3 index eq{exch pop exit}{pop}
ifelse}forall exch pop exch dup length 2 sub 0 exch getinterval cvr mul}
ifelse}def end /ln03:defpoint{ln03$defs begin{currentfile linebuf readline not
{stop}if getvarnum(\()search not{stop}if pop pop(,)search not{stop}if
currentpoint pop getdimension /x exch def pop(\))search not{stop}if
currentpoint exch pop getdimension[x 3 -1 roll]points varnum 3 -1 roll put pop
pop}stopped{(?Error in \\special ln03:defpoint)print pstack flush stop}if end}
def /ln03:connect{ln03$defs begin{currentfile linebuf readline not{stop}if
get2varnum /firstvarnum varnum def get2varnum 2 getdimension gsave
setlinewidth newpath points firstvarnum get aload pop moveto points varnum get
aload pop lineto stroke grestore}stopped{(?Error in \\special ln03:connect)
print pstack flush stop}if end}def /ln03:resetpoints{ln03$defs begin{
currentfile linebuf readline not{stop}if /firstvarnum 1 def getvarnum dup
token{pop pop /firstvarnum varnum def getvarnum}{pop}ifelse firstvarnum 1
varnum{points exch[0 0]put}for}stopped{(?Error in \\special ln03:resetpoints)
print pstack flush stop}if end}def
%%EndDocument
%%BeginDocument: texps.pro
TeXDict begin /rf{655360 div mul Resolution mul 7227 div /PixPerEm exch def
findfont dup length 1 add dict /newfont exch def{1 index /FID ne{newfont 3 1
roll put}{pop pop}ifelse}forall 256 dict begin newfont /Encoding get 0 1 255{
2 copy get 3 index 2 index get 1000 mul PixPerEm div def pop}for pop pop
newfont /Metrics currentdict put end /fontname exch def dmystr 2 fontname cvx
(@@@@)cvs putinterval newname dup newfont definefont[PixPerEm 0 0 PixPerEm neg
0 0]makefont def fontname{/foo setfont}2 array copy cvx def fontname load 0
dmystr 6 string copy cvn cvx put}bdf /ObliqueSlant{dup sin exch cos div neg}
bdf /SlantFont{/foo exch def[1 0 foo 1 0 0]TransFont}bdf /ExtendFont{/foo exch
def 3 2 roll[exch{foo div}forall]3 1 roll[foo 0 0 1 0 0]TransFont}bdf
/TransFont{exch findfont exch makefont dup length dict /newfont exch def{1
index /FID ne{newfont 3 1 roll put}{pop pop}ifelse}forall dup newfont
definefont pop}bdf end
%%EndDocument
TeXDict begin 300 @start /fa [ 0 0 0 0 0 0 0 0 0 0 0 0 0 14 17 25 14 0 17 17
17 17 17 17 17 28 36 36 25 50 50 39 12 17 28 25 25 50 41 17 17 17 25 28 12 17
12 14 25 25 25 25 25 25 25 25 25 25 17 17 28 28 28 25 46 36 33 36 36 33 30 39
39 19 25 39 33 47 36 39 30 39 36 28 33 36 36 50 36 36 33 17 14 17 17 25 17 25
28 22 28 22 17 25 28 14 17 28 14 41 28 25 28 28 22 19 17 28 25 36 25 25 22 20
11 20 17 17 22 25 25 28 28 28 28 19 25 25 25 25 25 28 14 14 14 14 22 22 22 22
22 25 25 25 25 25 25 33 36 36 36 36 25 25 8 25 25 25 25 36 25 25 17 17 28 28
36 25 25 25 12 28 27 17 17 25 25 25 50 50 39 39 39 39 39 36 19 19 19 17 19 33
33 33 33 17 17 36 50 36 36 36 36 36 36 26 29 0 0 0 0 0 0 0 0 0 0 15 0 0 0 0 33
0 0 16 0 0 0 0 0 0 0 0 0 0 0 0 14 0 0 0 0 0 0 0 ] /Times-Bold 1000 786432 rf
/fb df[<70F8F8F870>5 5 3 0 12]58 dc[<0000038000000F0000003C000000F0000003C000
000F0000003C000000F0000003C000000F0000003C000000F0000000F00000003C0000000F0000
0003C0000000F00000003C0000000F00000003C0000000F00000003C0000000F0000000380>25
24 3 2 32]60 dc[<01FE00FF80001E001C00002F001800002F001000002F8010000027801000
00478020000043C020000043C020000043C020000081E040000081E040000081F040000080F040
000100F0800001007880000100788000010078800002003D000002003D000002003F000002001F
000004001E000004000E000004000E00000C000E00001C00040000FF80040000>33 28 2 0 33]
78 dc dfe /fc [ 0 0 0 0 0 0 0 0 0 0 0 25 25 25 25 25 25 0 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 0 0 0 0 0 0 0 0 0 0 0 0 25 0 0 0 0 25 0 0 25 0 0 0 0 0
0 0 0 0 0 0 0 25 0 0 0 0 0 0 0 ] /Courier 1000 655360 rf /fd [ 0 0 0 0 0 0 0 0
0 0 0 0 0 7 14 18 12 0 14 14 14 14 14 14 14 21 28 30 21 37 37 30 10 14 17 21
21 35 32 14 14 14 21 23 10 14 10 12 21 21 21 21 21 21 21 21 21 21 12 12 23 23
23 18 38 30 28 28 30 25 23 30 30 14 16 30 25 37 30 30 23 30 28 23 25 30 30 39
30 30 25 14 12 14 14 21 14 18 21 18 21 18 14 21 21 12 12 21 12 32 21 21 21 21
14 16 12 21 21 30 21 21 18 20 8 20 14 14 18 21 21 21 21 21 21 16 21 21 21 21
21 21 12 12 12 12 18 18 18 18 18 18 18 18 18 18 18 25 30 30 30 30 21 21 7 21
21 21 21 30 18 21 14 14 23 23 30 21 21 21 10 23 19 15 14 18 18 21 42 42 30 30
30 30 30 30 14 14 14 14 14 25 25 25 25 14 14 28 42 30 30 30 30 30 30 22 19 0 0
0 0 0 0 0 0 0 0 11 0 0 0 0 25 0 0 13 0 0 0 0 0 0 0 0 0 0 0 0 12 0 0 0 0 0 0 0
] /Times-Roman 1000 655360 rf /fe [ 0 0 0 0 0 0 0 0 0 0 0 0 0 9 16 21 12 0 14
14 14 14 14 14 14 21 28 28 21 37 39 30 10 14 17 21 21 35 32 14 14 14 21 28 10
14 10 12 21 21 21 21 21 21 21 21 21 21 14 14 28 28 28 21 38 25 25 28 30 25 25
30 30 14 18 28 23 35 28 30 25 30 25 21 23 30 25 35 25 23 23 16 12 16 14 21 14
21 21 18 21 18 12 21 21 12 12 18 12 30 21 21 21 21 16 16 12 21 18 28 18 18 16
17 11 17 14 14 16 18 18 21 21 21 21 16 21 21 21 21 21 21 12 12 12 12 18 18 18
18 18 21 21 21 21 21 21 23 23 23 30 30 21 21 7 21 21 21 21 30 23 21 14 14 21
21 30 21 21 21 10 21 22 15 14 23 23 21 37 42 30 30 30 30 30 28 14 14 14 14 14
25 25 25 25 14 14 28 37 25 25 25 25 25 25 22 18 0 0 0 0 0 0 0 0 0 0 11 0 0 0 0
23 0 0 13 0 0 0 0 0 0 0 0 0 0 0 0 12 0 0 0 0 0 0 0 ] /Times-Italic 1000 655360
rf /ff [ 0 0 0 0 0 0 0 0 0 0 0 0 0 16 19 29 16 0 19 19 19 19 19 19 19 32 42 42
29 58 58 45 15 19 32 29 29 58 48 19 19 19 29 33 15 19 15 16 29 29 29 29 29 29
29 29 29 29 19 19 33 33 33 29 54 42 39 42 42 39 36 45 45 23 29 45 39 55 42 45
36 45 42 32 39 42 42 58 42 42 39 19 16 19 19 29 19 29 32 26 32 26 19 29 32 16
19 32 16 48 32 29 32 32 26 23 19 32 29 42 29 29 26 23 13 23 19 19 26 29 29 32
32 32 32 23 29 29 29 29 29 32 16 16 16 16 26 26 26 26 26 29 29 29 29 29 29 39
42 42 42 42 29 29 10 29 29 29 29 42 29 29 19 19 32 32 42 29 29 29 15 32 31 20
19 29 29 29 58 58 45 45 45 45 45 42 23 23 23 19 23 39 39 39 39 19 19 42 58 42
42 42 42 42 42 30 34 0 0 0 0 0 0 0 0 0 0 17 0 0 0 0 39 0 0 19 0 0 0 0 0 0 0 0
0 0 0 0 16 0 0 0 0 0 0 0 ] /Times-Bold 1000 917504 rf /fg [ 0 0 0 0 0 0 0 0 0
0 0 0 0 9 17 22 14 0 17 17 17 17 17 17 17 25 33 36 25 44 44 36 12 17 20 25 25
41 39 17 17 17 25 28 12 17 12 14 25 25 25 25 25 25 25 25 25 25 14 14 28 28 28
22 46 36 33 33 36 30 28 36 36 17 19 36 30 44 36 36 28 36 33 28 30 36 36 47 36
36 30 17 14 17 17 25 17 22 25 22 25 22 17 25 25 14 14 25 14 39 25 25 25 25 17
19 14 25 25 36 25 25 22 24 10 24 17 17 22 25 25 25 25 25 25 19 25 25 25 25 25
25 14 14 14 14 22 22 22 22 22 22 22 22 22 22 22 30 36 36 36 36 25 25 8 25 25
25 25 36 22 25 17 17 28 28 36 25 25 25 12 28 23 17 17 22 22 25 50 50 36 36 36
36 36 36 17 17 17 17 17 30 30 30 30 17 17 33 50 36 36 36 36 36 36 27 23 0 0 0
0 0 0 0 0 0 0 14 0 0 0 0 30 0 0 15 0 0 0 0 0 0 0 0 0 0 0 0 14 0 0 0 0 0 0 0 ]
/Times-Roman 1000 786432 rf /fh [ 0 0 0 0 0 0 0 0 0 0 0 0 0 13 23 31 20 0 23
23 23 23 23 23 23 35 47 51 35 63 63 51 18 23 29 35 35 59 55 23 23 23 35 40 18
23 18 20 35 35 35 35 35 35 35 35 35 35 20 20 40 40 40 31 65 51 47 47 51 43 39
51 51 23 27 51 43 63 51 51 39 51 47 39 43 51 51 67 51 51 43 23 20 23 23 35 23
31 35 31 35 31 23 35 35 20 20 35 20 55 35 35 35 35 23 27 20 35 35 51 35 35 31
34 14 34 23 23 31 35 35 35 35 35 35 27 35 35 35 35 35 35 20 20 20 20 31 31 31
31 31 31 31 31 31 31 31 43 51 51 51 51 35 35 12 35 35 35 35 51 31 35 23 23 39
39 51 35 35 35 18 39 32 25 23 31 31 35 71 71 51 51 51 51 51 51 23 23 23 23 23
43 43 43 43 23 23 47 71 51 51 51 51 51 51 38 33 0 0 0 0 0 0 0 0 0 0 19 0 0 0 0
43 0 0 22 0 0 0 0 0 0 0 0 0 0 0 0 20 0 0 0 0 0 0 0 ] /Times-Roman 1000 1114112
rf end
%%BeginSetup
%%Feature: *Resolution 300
 TeXDict begin @letter
%%EndSetup
%%Page: 1 1
 bop 745 310 a fh(TL0)18 b(V)-8 b(ersion)19 b(2.0)767 543 y fg(Thorsten)13 b
(von)f(Eicken)772 642 y(Klaus)g(Erik)h(Schauser)677 840 y(Threaded)f(Id)g(Com\
piler)g(Project)603 938 y(Parallel)g(Computing)g(Structures)f(Group)700 1037 y
(Computer)g(Science)i(Division)633 1136 y(University)f(of)g(California,)g(Ber\
keley)0 1388 y ff(1)58 b(Overview)0 1557 y fe(TL0)12 b fd(\(standing)f(for)h
(Thread)h(Language)h(Zero\))e(is)h(an)f(intermediate)g(language)h(used)f(in)g
(the)g(compilation)f(of)h(Id)g(to)g(various)g(non-)0 1642 y(data\257ow)g(mach\
ine)h(languages.)21 b(TL0)13 b(started)f(as)g(an)h(implementation)e(of)h(the)
g(concepts)g(developed)g(in)f(the)h(Threaded)h(Abstract)0 1727 y(Machine)d
(\()p fe(T)m(AM)p fd(\))g(as)h(described)f(in)f([citation].)14 b(However)n
(,)d(version)e(2.0)h(of)g(TL0)g(departs)g(substantially)e(from)i(T)m(AM,)h
(in)e(particular)0 1811 y(to)h(allow)f(a)i(complete)g(system)f(\(i.e.)16 b
(including)8 b(run-time)h(support)g(functions\))g(to)h(be)g(written)f(in)h
(TL0.)0 1938 y(The)h(main)g(function)e(of)i(TL0)g(in)f(the)h(compilation)e
(process)i(is)g(to)f(provide)f(a)j(machine)f(independent)f(machine)h(language)
g(suitable)0 2023 y(for)f(rather)h(simple)f(but)g(still)f(ef)o(\256cient)i
(expansion)f(to)g(concrete)i(machine)f(languages.)17 b(Machine)11 b(independe\
nce)g(is)f(understood)g(to)0 2108 y(mean)h(that)e(all)g(valid)g(TL0)i(program\
s)f(can)g(be)g(translated)g(to)f(any)h(of)f(the)h(supported)e(machine)j(langu\
ages.)k(Also)10 b(there)f(are)i(no)f(TL0)0 2192 y(constructs)h(which,)h(when)
f(used,)h(make)h(a)f(program)f(more)h(suited)f(for)g(a)h(particular)e(class)i
(of)g(machines.)19 b(T)m(o)12 b(guide)f(the)g(language)0 2277 y(design,)17 b
(TL0)f(is)g(primarily)e(tar)o(geted)i(at)g(distributed)e(memory)i(multiproces\
sors)f(but)f(care)j(has)g(been)f(taken)g(so)g(that)f(ef)o(\256cient)0 2362 y
(execution)9 b(on)g(shared)h(memory)g(multiprocessors)f(and)h(uniprocessors)f
(can)h(be)g(achieved.)16 b(Concerning)8 b(machine)i(independence,)0 2447 y
(one)h(should)f(not)h(for)o(get)g(that)f(the)h(Id)g(to)g(TL0)h(compilation)e
(process)i(may)f(perform)h(high-level)d(optimizations)h(which)h(may)g(favor)0
2531 y(execution)f(on)g(one)g(of)g(the)g(processor)g(types.)0 2658 y(The)18 b
(following)c(sections)j(describe)g(the)g(TL0)h(language)f(V)-5 b(ersion)17 b
(2.0)g(alternating)e(between)j(a)f(top-down)e(and)i(a)h(bottom-up)965 2825 y
(1)p eop
%%Page: 2 2
 bop 0 42 a fd(approach.)31 b(Regarding)15 b(terminology)m(,)h(note)f(that)g
(the)g(term)h(of)g fe(compilation)d fd(is)i(used)h(to)f(refer)h(to)f(the)g
(translation)f(of)i(TL0)g(to)0 126 y(machine)11 b(language.)0 390 y ff(2)58 b
(Pr)o(ogram)14 b(Structur)o(e)0 560 y fd(A)f(TL0)h(program)f(is)h(formed)f
(by)g(a)h(collection)e(of)h fe(codeblocks)h fd(and)f fe(initialized)e(structu\
r)n(e)i fd(declarations.)24 b(The)14 b(former)g(roughly)0 645 y(correspond)e
(to)f(Id)h(functions)e(while)i(the)g(latter)f(are)i(used)f(for)g(Id)f(constan\
ts)h(\(if)f(Klaus)h(and)g(Thorsten)g(can)h(agree)g(on)e(this...\).)21 b(All)0
729 y(codeblocks)11 b(and)g(initialized)e(structures)i(are)h(compiled)f(in)f
(isolation)g(and)h(are)h(typically)d(each)k(stored)d(in)h(a)h(\256le)f(on)g
(their)f(own)h(\(by)0 814 y(convention)e(the)h(\256le)g(name)i(extension)d fc
(.tl0)h fd(is)g(used\).)0 941 y(Each)g(codeblock)e(in)g(in)g(turn)g(consists)
g(of)g(a)i(frame)f(declaration)f(section,)h(an)g(inlet)f(section)g(and)h(a)g
(thread)g(section.)14 b(During)7 b(program)0 1026 y(execution,)12 b(for)f(eac\
h)i(invocation)e(of)g(a)i(codeblock)e(\(i.e.)20 b(function)11 b(call\))g(a)i
(new)f(frame)h(for)e(local)h(variable)f(storage)h(is)g(allocated.)0 1111 y
(The)d(frame)g(declarations)e(describe)i(the)f(sizes)h(of)e(various)h(parts)g
(of)f(the)h(frame.)16 b(The)8 b(inlet)f(section)h(describes)h(the)e(interface)
i(through)0 1195 y(which)k(the)g(codeblock)g(receives)i(messages.)26 b(In)14 b
(general)f(terms,)i(the)e(inlet)g(section)g(provides)f(a)i(message)i(handler)
d(\(a)g(piece)h(of)0 1280 y(code\))d(for)e(every)i(message)h(to)e(be)g(receiv\
ed.)16 b(The)11 b(thread)f(section)g(contains)g(the)g(code)h(though)d(of)i
(as)h(the)f(body)g(of)g(a)h(codeblock.)0 1407 y(codeblock)f(::=)g fc(CBLOCK)g
fd(frame)r 13 2 v 13 w(decl)h(inlet)r 13 2 v 12 w(section)f(thread)r 13 2 v 12
w(section)g fc(END)r 13 2 v 13 w(CBLOCK)0 1671 y ff(3)58 b(Storage)15 b(Model)
0 1841 y fd(The)d(storage)g(model)f(of)g(TL0)h(is)g(composed)g(of)f(three)g
(levels:)17 b(registers,)12 b(local)g(frame)g(variables)f(\(\252locals\272\))
h(and)g(heap-allocated)0 1925 y(structures.)29 b(Registers)15 b(are)h(the)e
(cheapest)j(storage)e(class)g(to)g(access,)k(however)c(their)f(contents)g(is)
h(not)f(preserved)i(beyond)e(the)0 2010 y(duration)f(of)i(an)g(activation)e
(\(term)i(de\256ned)g(later\).)29 b(Accessing)15 b(locals)g(\(also)g(called)g
(\252frame)h(slots\272\))e(is)h(more)g(expensive)g(that)0 2095 y(accessing)g
(registers)e(in)f(that)h(a)h(local)f(memory)h(access)i(is)d(typically)f(invol\
ved.)23 b(All)12 b(instructions)g(can)i(take)f(either)g(registers)g(or)0 2180
y(locals)e(as)g(operands)g(\(i.e.)18 b(TL0)11 b(is)g(a)g(memory-to-memory)g
(instruction)e(set\).)17 b(T)m(o)11 b(keep)g(TL0)h(machine)g(independent)d
(the)i(number)0 2264 y(of)h(available)g(registers)f(is)h(not)f(limited,)h(rat\
her)f(TL0)i(registers)f(are)g(considered)g(to)g(be)g(pseudo)f(registers)h(whi\
ch)g(can)g(be)h(mapped)0 2349 y(to)d(hardware)h(registers)f(or)g(to)g(frame)i
(slots)e(by)g(the)g(TL0)h(compiler)n(.)16 b(By)10 b(convention)f(lower)h(numb\
ered)h(registers)f(are)h(allocated)g(to)0 2434 y(hardware)g(registers)f(with)
f(higher)g(priority)f(than)i(higher)g(numbered)g(registers.)0 2561 y(Heap)15 b
(allocated)g(structures)f(reside)g(in)g(memory)h(just)f(like)g(locals.)27 b
(Unlike)14 b(locals)g(they)h(can)g(only)e(be)i(acced)h(through)d(special)0
2645 y(split-phase)e(instructions)f(but)h(remote)h(accesses)j(\(i.e.)21 b(on)
12 b(another)f(processor\))h(are)h(supported)e(transparently)m(.)20 b(Non)11 b
(split-phase)965 2825 y(2)p eop
%%Page: 3 3
 bop 0 42 a fd(load)11 b(and)g(store)f(instructions)f(to)i(access)i(local)d
(structures)h(are)h(also)f(provided)e(but)h(are)i(mainly)f(intended)f(for)g
(low-level)g(run-time)0 126 y(system)16 b(primitives.)30 b(In)15 b(addition)f
(to)h(any)h(data)g(value,)h(each)g(slot)e(of)g(a)h(structure)f(holds)g(a)h
(few)g(tag)f(bits)g(which)g(are)i(used)f(to)0 211 y(implement)10 b(the)g(sync\
hronization)f(primitives)f(of)i(Id)g(I-structures)g(and)g(M-structures.)0 475
y ff(4)58 b(Data)15 b(T)l(ypes)f(and)h(V)-5 b(ariables)0 645 y fd(TL0)11 b
(supports)f(a)i(number)e(of)h(data)g(types)g(shown)f(in)g(table)h(X.)g(All)f
(data)h(types)g(except)g(\252general\272)h(de\256ne)g(an)f(interpretation)e
(of)h(bit)0 729 y(patterns)g(as)h(data)f(values)h(and)f(various)g(operations)
f(on)h(values)g(of)g(each)i(data)e(type)g(are)h(provided.)0 856 y(Registers)e
(and)g(locals)g(are)h(available)f(in)g(every)h(data)f(type)g(and)g(are)h(refe\
renced)h(through)c(a)j(variable)f(name)h(formed)f(by)g(contracting)0 941 y
(the)k(variable')n(s)h(1-letter)e(abbreviation)h(\()p fc(g)p fd(,)h fc(i)p fd
(,)h fc(f)p fd(,)g fc(c)p fd(,)g fc(b)p fd(,)g fc(s)f fd(or)f fc(p)p fd(\),)i
(the)e(storage)h(class)g(\()p fc(reg)f fd(for)h(registers)f(and)h fc(slot)f fd
(for)g(local)0 1026 y(frame)f(slots\))f(and)g(the)h(register/slot)d(number)n
(.)19 b(Note)11 b(that)g(the)g(registers)g(and)h(slots)e(of)i(each)g(data)g
(type)f(are)h(numbered)g(separately)0 1111 y(\(i.e.)k fc(ireg0)9 b fd(doesn')
o(t)h(refer)h(to)f(the)g(same)h(register)f(as)h fc(freg0)p fd(\).)0 1238 y
(variable)r 13 2 v 13 w(name)g(::=)f([)p fc(g)p fd(,)p fc(i)p fd(,)p fc(f)p fd
(,)p fc(c)p fd(,)p fc(b)p fd(,)p fc(s)p fd(,)p fc(p)p fd(])h([)p fc(reg)p fd
(,)p fc(slot)p fd(][)p fc(0)p fd(-)p fc(9)p fd(][)p fc(0)p fd(-)p fc(9)p fd
(]*)0 1365 y(Structures)k(only)g(support)f(the)h(data)h(type)f(general)h(and)
g(thus)f(values)h(of)f(other)g(types)g(must)h(be)g(cast)g(appropriately)e(\(t\
his)g(will)0 1449 y(hopefully)f(change)i(in)e(the)i(future\).)26 b(W)n(ith)14
b(the)g(exception)g(of)g(initialized)f(structures)h(\(de\256ned)g(later\),)i
(structures)d(can)j(only)d(be)0 1534 y(referenced)f(through)c(pointers)h(whic\
h)h(are)h(generated)g(by)f(the)g(memory)h(allocator)n(.)0 1661 y(V)-5 b(ariab\
les)12 b(of)f(type)h(general)g(are)g(special)g(in)f(that)g(their)g(purpose)g
(is)g(to)g(be)h(used)g(as)g(containers)g(to)f(hold)f(values)i(of)f(any)h(othe\
r)f(data)0 1746 y(type.)k(T)m(o)9 b(that)g(ef)o(fect)i(the)e(contents)g(of)g
(any)h(variable)f(of)g(any)h(type)f(can)h(be)g(moved)f(into)g(a)h fe(general)
f fd(\(variable)g(of)g(type)g(general\))h(and)0 1830 y(re-extracted)i(at)f
(a)h(later)f(point.)16 b(The)c(idea)g(is)f(that)g(generals)g(can)h(be)g(used)
f(to)g(hold)f(and)h(move)h(around)f(data)g(of)g(an)h(unknown)e(type)0 1915 y
(as)j(long)d(as)j(the)f(\256nal)g(recipient)f(of)h(the)g(data)g(knows)f(its)g
(type)h(\(there)g(is)g(no)f(way)h(to)g(query)f(the)h(type)g(of)f(the)h(curren\
t)g(content)f(of)h(a)0 2000 y(general\).)j(In)10 b(other)g(words,)g(the)h(onl\
y)e(operations)g(allowed)h(on)g(generals)h(are)g(moves)f(and)h fe(type)f(cast\
s)h fd(to/from)e(another)h(data)g(type.)0 2084 y(T)m(ype)h(casts)g(allow)f
(the)h(content)f(of)g(a)h(general)g(to)f(be)h(interpreted)e(as)i(any)g(other)
f(type)g(or)g(they)g(allow)g(a)h(variable)g(of)f(any)h(type)f(to)g(be)0 2169 y
(viewed)h(as)g(a)g(general.)17 b(The)11 b(only)e(guaranteed)i(property)f(of)g
(type)g(casts)i(is)e(that)g(casting)g(a)h(value)g(of)f(a)i(given)e(type)g(to)
g(a)h(general)g(an)0 2254 y(later)g(casting)f(that)g(general)i(back)f(to)f
(the)h(same)h(type)f(yields)f(the)g(original)f(value.)17 b(Note)11 b(that)f
(a)i(type)e(cast)i(never)f(implies)f(any)h(data)0 2338 y(conversion)f(however)
n(,)h(depending)e(on)i(the)f(instruction,)e(data)j(type)f(and)h(storage)f(cla\
ss)h(involved,)f(a)h(type)f(cast)h(may)g(require)f(extra)0 2423 y(data)h(move\
ment.)0 2550 y(data)r 13 2 v 13 w(type)f(::=)g([)p fc(g)p fd(,)p fc(i)p fd
(,)p fc(f)p fd(,)p fc(c)p fd(,)p fc(b)p fd(,)p fc(s)p fd(,)p fc(p)p fd(])0
2677 y(casted)r 13 2 v 14 w(variable)g(::=)g(variable)r 13 2 v 12 w(name)p fc
(.)p fd(data)r 13 2 v 14 w(type)965 2825 y(3)p eop
%%Page: 4 4
 bop 0 42 a fd(Integers)11 b(are)h(typically)e(32-bit)g(signed)h(quantities)f
(although)g(some)i(machines)g(may)g(support)e(64-bit)g(integers.)18 b(Floats)
11 b(\(\257oating-)0 126 y(point)e(numbers\))i(are)h(at)e(least)h(in)g(64-bit)
e(IEEE)j(standard)e(format,)h(but)f(some)i(bizarre)f(machines)g(might)f(not)g
(really)h(support)e(IEEE)0 211 y(conformant)14 b(arithmetic.)29 b(The)16 b
(special)f(constants)g fc(nan)f fd(and)h fc(inf)g fd(represent)g(\252not-a-nu\
mber)r(\272)g(and)g(\252in\256nity\272)f(respectively)m(.)0 296 y(Characters)
h(are)h(8-bit)d(ASCII)h(and)h(booleans)f(are)h(1-bit)f(true/false)g(values,)i
(but)e(variables)h(of)f(these)h(two)f(types)g(may)i(actually)0 380 y(occupy)
10 b(more)h(space.)0 507 y(Synchronization)h(variables)j(are)g(small)f(8-bit)
f(unsigned)g(integers)h(on)f(which)h(only)f(two)h(operations)f(are)i(de\256ne\
d:)23 b(conversion)0 592 y(to/from)9 b(integers)h(and)g(an)h(atomic)f(decreme\
nt-and-test-zero.)0 719 y(Pointers)g(are)h(typically)e(64)h(bits)f(wide)h(and)
h(contains)f(a)h(global)e(address)i(consisting)e(of)h(a)h(processor)g(number)
f(and)g(a)h(local)g(address)0 804 y(on)g(that)g(processor)n(.)19 b(Pointers)
10 b(may)i(point)e(to)h(a)h(variety)f(of)g(memory)h(objects)f(but)f(hold)h
(no)g(information)e(\(tag\))i(about)g(the)g(type)g(of)0 888 y(the)g(object)g
(pointed)f(to.)18 b(As)12 b(a)g(special)f(case,)j(a)e(pointer)e(variable)h
(may)h(hold)f(a)g(small)h(integer)f(in)f(the)i(range)f(0..255)h(instead)f(of)
g(an)0 973 y(address.)16 b(A)10 b(special)h(instruction)d(tests)j(whether)f
(a)h(given)e(pointer)g(variable)h(holds)g(an)g(address)h(or)f(an)h(integer)n
(.)k(A)10 b(pointer)f(holding)0 1058 y(the)i(integer)f(0)h(is)f(equivalent)g
(to)g(a)i fc(nil)e fd(pointer)n(.)16 b(The)11 b(objects)g(pointers)f(may)h
(point)e(to)i(are)g(structures,)g(frames)h(and)f(codeblocks.)0 1142 y(Pointer\
s)c(to)h(structures)f(are)i(generated)g(by)e(the)h(memory)h(allocator)e(or)h
(by)g(referencing)g(an)g(initialized)f(structure)g(by)h(name;)h(pointers)0
1227 y(to)j(frames)i(are)f(also)g(generated)g(by)f(the)h(memory)g(allocator)f
(or)g(by)g(a)i(reference)g(of)e(the)h(current)f(frame)i(pointer)d fc(fp)p fd
(;)i(pointers)f(to)0 1312 y(codeblocks)e(are)h(obtained)f(by)f(referencing)i
(a)g(codeblock)f(by)f(name.)25 1427 y(data)h(type)51 b(1-letter)e(typical)g
(constants)227 1511 y(abbrev)m(.)h(size)0 1538 y 889 2 v 25 1598 a(general)80
b(g)149 b(64)10 b(bits)50 b(\320)25 1682 y(integer)86 b(i)158 b(32)10 b(bits)
50 b fc(-1)25 b(103)25 1767 y fd(\257oat)128 b(f)156 b(64)10 b(bits)50 b fc
(1.0)25 b(-1e-12)25 1852 y fd(character)51 b(c)152 b(8)10 b(bits)71 b fc('a)
25 b(/007)25 1936 y fd(boolean)70 b(b)149 b(1)10 b(bits)71 b fc(true)25 b(fal\
se)25 2021 y fd(synch.)95 b(s)154 b(8)10 b(bits)71 b(\320)25 2106 y(pointer)
83 b(p)149 b(64)10 b(bits)50 b fc(nil)25 b(fp)f(1p)560 2190 y(cb)r 13 2 v 13 w
(foo)g(is)r 13 2 v 13 w(foo)0 2217 y 889 2 v 181 x ff(5)58 b(Inlets)0 2568 y
fd(A)12 b(codeblock)f(may)h(receive)g(an)g(arbitrary)e(number)i(of)f(arbitrar\
y)g(messages.)20 b(However)n(,)13 b(a)f(message)h(handler)e(must)h(be)f(provi\
ded)0 2652 y(for)e(each)h(message)h(type)e(to)g(be)g(received,)i(these)e(hand\
lers)g(are)h(called)g fe(inlets)e fd(and)h(are)h(numbered)g(0..N)g(\()p fb
(N)16 b(<)c fd(256\).)i(All)8 b(messages)965 2825 y(4)p eop
%%Page: 5 5
 bop 0 42 a fd(in)10 b(the)g(system)g(are)i(sent)e(to)f(a)i(speci\256c)g(inle\
t)f(of)g(a)g(codeblock)g(invocation)f(\(i.e.)16 b(to)9 b(a)i(frame\).)0 169 y
(An)e(inlet)f(handler)h(is)g(a)h(thread)f(executed)h(at)g(the)f(time)g(the)g
(message)i(is)e(received.)16 b(In)9 b(general)g(such)h(an)f fe(inlet)g(thr)n
(ead)g fd(behaves)h(like)f(a)0 253 y(normal)h(thread,)h(however)f(there)g(are)
i(a)e(few)h(important)e(dif)o(ferences.)16 b(Inlet)10 b(threads)g(are)h(synta\
ctically)f(marked)h(as)g(such)f(by)g(using)0 338 y fc(ithr)p fd(N)f(as)g(thre\
ad)g(names.)16 b(Inlet)8 b(threads)h(may)g(fork)f(other)h(threads,)g(however)
g(forking)e(a)j(normal)e(thread)h(pushes)g(the)f(thread)h(onto)0 423 y(the)h
(remove)h(continuation)d(vector)n(,)j(and)f(as)h(a)g(result,)f(the)g(thread)h
(will)e(only)g(execute)i(when)f(the)h(frame)g(is)f(activated)g(by)g(the)g(glo\
bal)0 507 y(scheduler)n(.)0 771 y ff(6)58 b(Arithmetic)16 b(Instructions)0 941
y fd(TL0)d(provides)e(a)i(rather)f(generous)h(set)f(of)g(arithmetic)g(operati\
ons.)20 b(All)12 b(unary)g(operations)f(have)i(two)e(operands)i(and)f(all)g
(binary)0 1026 y(operations)g(have)i(three)f(oprands.)24 b(TL0)14 b(use)g(tra\
ditional)d(assembly)i(language)h(style)e(pre\256x)i(notation)d(and)i(the)g
(\256rst)g(operand)g(is)0 1111 y(generally)d(the)h(destination)d(for)j(the)f
(result.)15 b(All)10 b(oprands)g(must)h(be)g(of)f(the)g(same)i(data)f(type)f
(and)h(that)f(type)g(is)g(indicated)g(by)g(a)i(type)0 1195 y(suf)o(\256x)e
(to)g(the)g(opertion.)0 1322 y(unary)r 13 2 v 12 w(instr)g(::=)g(unary)r 13 2
v 12 w(opcode)g(type)r 13 2 v 13 w(suf)o(\256x)g(dest)g(source)0 1449 y(binar\
y)r 13 2 v 12 w(instr)f(::=)h(binary)r 13 2 v 12 w(opcode)g(type)r 13 2 v 13 w
(suf)o(\256x)g(dest)g(source)h(source)0 1576 y(The)g(following)d(table)i(list\
s)f(all)h(the)g(unary)f(operations)h(and)g(the)g(allowed)f(operand)h(types.)
15 b(Note)10 b(that)g(an)g(operand)g(of)g(a)h(given)f(type)0 1661 y(can)h(be)
g(obtained)e(by)h(casting)g(a)h(variable)f(to)f(type)h(genral)g(to)g(that)g
(type.)0 1829 y fc(Examples:)75 1914 y(ADD.I)24 b(ireg0)h(=)f(ireg1)h(1)75
1999 y(ADD.I)f(islot10)g(=)h(gslot3.I)f(greg2.I)75 2084 y(MUL.F)g(freg0)h(=)f
(gslot0.F)h(100.0)75 2168 y(NOT.I)f(ireg0)h(=)f(ireg1)0 2432 y ff(7)58 b(T)l
(ype)14 b(Conversion)h(Instructions)0 2602 y fd(A)9 b(number)h(of)f(instructi\
ons)e(convert)i(values)h(of)f(one)g(data)h(type)f(to)g(another)n(.)14 b(These)
d(should)d(not)g(be)i(confused)f(with)g(the)g(type)g(casts.)0 2687 y(The)i
(following)d(table)i(lists)f(the)h(conversion)g(instructions:)965 2825 y(5)p
eop
%%Page: 6 6
 bop 25 59 a fd(opcode)50 b(conversion)81 b(caveats)0 86 y 1130 2 v 25 146 a
(IT)o(OF)e(int)9 b(to)g(\257oat)94 b(\320)25 230 y(IT)o(OC)74 b(int)9 b(to)g
(char)97 b(unde\256ned)10 b(if)g(not)f(in)h(0..255)25 315 y(IT)o(OS)79 b(int)
9 b(to)g(synch)71 b(unde\256ned)10 b(if)g(not)f(in)h(0..255)25 400 y(IT)o(OP)
79 b(int)9 b(to)g(pointer)49 b(unde\256ned)10 b(if)g(not)f(in)h(0..255)459 484
y(result)g(is)g(a)g(small)h(int)e(int)g(a)i(pointer)25 569 y(FT)o(OI)79 b(\
\257oat)10 b(to)f(int)93 b(unde\256ned)10 b(if)g(not)f(in)h(-2)813 559 y(^)
810 569 y(31..2)896 559 y(^)893 569 y(31-1)25 654 y(CT)o(OI)74 b(char)10 b
(to)g(int)95 b(\320)25 738 y(ST)o(OI)79 b(synch)10 b(to)f(int)70 b(\320)25 823
y(PT)o(OI)79 b(pointer)9 b(to)g(int)49 b(unde\256ned)10 b(if)g(not)f(a)i(smal\
l)f(int)g(in)f(a)i(pointer)0 850 y 1130 2 v 181 x ff(8)58 b(Inlet)15 b(Instru\
ctions)0 1200 y fd(Syntax:)100 1361 y fc(INLET)24 b(inlet6)g(=)h(islot5)g(fsl\
ot6)f(greg4.b)g(thr9)0 1625 y ff(9)58 b(Opcodes)0 1838 y fa(9.1)50 b(T)l(ype)
13 b(Conversion)0 1993 y fd(T)m(ype)j(conversion)g(must)g(be)g(explicit.)31 b
(Supported)15 b(are)h(conversions)g(between)g(integer)f(and)h(\257oats)g(\(IT)
o(OF)m(,)h(FT)o(OI\),)g(between)0 2078 y(characters)12 b(and)e(integer)g(\(CT)
o(OI,)g(IT)o(OC\),)h(and)f(between)h(small)f(pointers)f(and)i(integers)f(\(PT)
o(OI,)h(IT)o(OP\).)0 2205 y(Examples:)100 2365 y fc(ITOF)24 b(greg4)h(=)f(gre\
g5)100 2450 y(FTOI)g(ireg4)h(=)f(freg5)965 2825 y fd(6)p eop
%%Page: 7 7
 bop 0 42 a fa(9.2)50 b(Split)11 b(Phase)i(Instructions)0 196 y fd(Syntax:)
100 357 y fc(IFETCH)24 b(inlet5)g(=)h(preg5[ireg6])100 441 y(RALLOC)f(inlet6-\
inlet10)g(=)g(cb_foo)100 526 y(RALLOC)g(inlet6-inlet10)g(=)g(cb_foo)h(inlet3)
f(=)h(ireg0.g)100 611 y(RSEND)f(preg4)h(inlet3)f(=)h(freg4.g)100 695 y(RCALL)
f(inlet7-inlet10)g(=)g(cb_foo)h(inlet3)f(=)h(ireg0.g)0 927 y fa(9.3)50 b(Arit\
hmetic)12 b(Operations)0 1082 y fd(Unary)e(Operations:)0 1209 y(Binary)f(Oper\
ations:)14 b fc(ADD.[IF],)24 b(SUB.[IF],)g(EQ.[GFIPCBS],)g fb(:)7 b(:)g(:)0
1336 y fd(Syntax:)100 1496 y fc(ADD.F)24 b(greg5)h(=)f(greg9)h(freg4)100 1580
y(ADD.F)f(freg5)h(=)f(freg5)h(greg4)0 1845 y ff(10)58 b(Questions)100 2014 y
fc(rcall)100 2099 y(gc_foo)0 2268 y fd(character)11 b(constants)965 2825 y
(7)p eop
%%Trailer
 end
%%EOF
